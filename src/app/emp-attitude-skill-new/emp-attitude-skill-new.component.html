<app-nav-bar></app-nav-bar>

<div class="container" style="background-color: #f5f5f5">
  <h1 class="title">FORM EVALUASI KINERJA - SIKAP DAN KEAHLIAN PERSONAL</h1>
  <!-- <p style="text-align: center">
    Total nilai yang harus anda isi: {{ getUnfilledScoresCount() }}.
  </p>
  <p style="text-align: center">
    Button simpan dapat ditekan jika anda sudah mengisi semua nilai yang ada
    disini.
  </p> -->
  <p class="center-text">Bobot tiap kriteria nilai:</p>
  <table class="nilai-table">
    <thead>
      <tr>
        <th>Kriteria Nilai</th>
        <th>Nilai</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Sangat Baik</td>
        <td>100</td>
      </tr>
      <tr>
        <td>Baik</td>
        <td>80</td>
      </tr>
      <tr>
        <td>Cukup</td>
        <td>60</td>
      </tr>
      <tr>
        <td>Kurang</td>
        <td>40</td>
      </tr>
      <tr>
        <td>Sangat Kurang</td>
        <td>20</td>
      </tr>
    </tbody>
  </table>

  <div class="form-group">
    <label for="assessmentYear">Assessment Year:</label>
    <input
      type="number"
      id="assessmentYear"
      [(ngModel)]="assessmentYear"
      disabled="true"
      class="input-field"
    />
  </div>

  <div *ngFor="let group of groupData" class="group-container">
    <h3 class="group-title">{{ group.group_name }}</h3>
    <p-table
      [value]="group.attitude_skills"
      [paginator]="false"
      class="data-table"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>No.</th>
          <th>Kriteria</th>
          <th>Nilai</th>
          <!-- <th>Status</th> -->
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-skill let-i="rowIndex">
        <tr>
          <td>{{ i + 1 }}</td>
          <td>{{ skill.attitude_skill_name }}</td>
          <td>
            <p-dropdown
              [options]="scoreOptions"
              [ngModel]="skill.score"
              placeholder="Pilih nilai"
              [appendTo]="'body'"
              (onChange)="logSkillId(skill.id, $event.value)"
              [disabled]="isSkillDisabled(skill.id)"
              [style]="{ width: '180px' }"
            >
              > ></p-dropdown
            >
          </td>
          <!-- <td>
            <span [ngStyle]="{ color: getStatusColor(skill.id) }">
              {{ getStatusText(skill.id) }}
            </span>
          </td> -->
        </tr>
      </ng-template>
    </p-table>
  </div>

  <div class="button-container">
    <button
      pButton
      type="button"
      label="Simpan"
      (click)="saveSkills()"
      [disabled]="getUnfilledScoresCount() > 0"
    ></button>
  </div>
</div>
